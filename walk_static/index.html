
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A full featured walkthough of using Django on Zappa (powered by AWS Lambda in serverless environment)">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.5.4">
    
    
      
        <title>Hosting Static Files - Guide to using Django with Zappa</title>
      
    
    
      <script src="../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-b1a1975878.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-f78e5cb881.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="deep-purple" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href=".." title="Guide to using Django with Zappa" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Walkthroughs
                </span>
              
            
            Hosting Static Files
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/edgarroman/zappa-django-guide" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      edgarroman/zappa-django-guide
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../setup/" title="Walkthroughs" class="md-tabs__link md-tabs__link--active">
          Walkthroughs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../aws_credentials/" title="AWS Setup" class="md-tabs__link">
          AWS Setup
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Guide to using Django with Zappa
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/edgarroman/zappa-django-guide" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      edgarroman/zappa-django-guide
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Walkthroughs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Walkthroughs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../setup/" title="Setup your Environment" class="md-nav__link">
      Setup your Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../walk_core/" title="Core Django Setup" class="md-nav__link">
      Core Django Setup
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Hosting Static Files
      </label>
    
    <a href="./" title="Hosting Static Files" class="md-nav__link md-nav__link--active">
      Hosting Static Files
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#static-files-and-code-on-a-single-server" title="Static files and Code on a Single Server" class="md-nav__link">
    Static files and Code on a Single Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leveraging-wsgi-app-to-serve-files" title="Leveraging WSGI app to serve files" class="md-nav__link">
    Leveraging WSGI app to serve files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-external-services-to-serve-files" title="Using external services to serve files" class="md-nav__link">
    Using external services to serve files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-cdn-for-the-entire-project" title="Using a CDN for the entire project" class="md-nav__link">
    Using a CDN for the entire project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-and-prerequisites" title="Setup and Prerequisites" class="md-nav__link">
    Setup and Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-amazon-account" title="Setup Amazon Account" class="md-nav__link">
    Setup Amazon Account
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-cors" title="Configure CORS" class="md-nav__link">
    Configure CORS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-django-project" title="Configure Django Project" class="md-nav__link">
    Configure Django Project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-modules" title="Install modules" class="md-nav__link">
    Install modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-django-storages-to-the-installed_apps-in-settingspy" title="Add Django-Storages to the INSTALLED_APPS in settings.py" class="md-nav__link">
    Add Django-Storages to the INSTALLED_APPS in settings.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-django-storages-in-settingspy" title="Configure Django-Storages in settings.py" class="md-nav__link">
    Configure Django-Storages in settings.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#push-your-static-files-to-the-cloud" title="Push your static files to the cloud" class="md-nav__link">
    Push your static files to the cloud
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-with-the-admin" title="Test with the admin" class="md-nav__link">
    Test with the admin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-http-settings" title="Additional HTTP Settings" class="md-nav__link">
    Additional HTTP Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpful-links" title="Helpful Links" class="md-nav__link">
    Helpful Links
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../walk_database/" title="Using a Database" class="md-nav__link">
      Using a Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../walk_domain/" title="Custom Domains" class="md-nav__link">
      Custom Domains
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../walk_app/" title="Application Adaptations" class="md-nav__link">
      Application Adaptations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      AWS Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        AWS Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_credentials/" title="Managing Credentials" class="md-nav__link">
      Managing Credentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_network/" title="Adventures in Networking" class="md-nav__link">
      Adventures in Networking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_database/" title="Creating an RDS Database" class="md-nav__link">
      Creating an RDS Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_route53/" title="Working with Route53" class="md-nav__link">
      Working with Route53
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws_acm/" title="AWS Credential Manager (ACM)" class="md-nav__link">
      AWS Credential Manager (ACM)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../additional/" title="Additional" class="md-nav__link">
      Additional
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#static-files-and-code-on-a-single-server" title="Static files and Code on a Single Server" class="md-nav__link">
    Static files and Code on a Single Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leveraging-wsgi-app-to-serve-files" title="Leveraging WSGI app to serve files" class="md-nav__link">
    Leveraging WSGI app to serve files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-external-services-to-serve-files" title="Using external services to serve files" class="md-nav__link">
    Using external services to serve files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-cdn-for-the-entire-project" title="Using a CDN for the entire project" class="md-nav__link">
    Using a CDN for the entire project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-and-prerequisites" title="Setup and Prerequisites" class="md-nav__link">
    Setup and Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-amazon-account" title="Setup Amazon Account" class="md-nav__link">
    Setup Amazon Account
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-cors" title="Configure CORS" class="md-nav__link">
    Configure CORS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-django-project" title="Configure Django Project" class="md-nav__link">
    Configure Django Project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-modules" title="Install modules" class="md-nav__link">
    Install modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-django-storages-to-the-installed_apps-in-settingspy" title="Add Django-Storages to the INSTALLED_APPS in settings.py" class="md-nav__link">
    Add Django-Storages to the INSTALLED_APPS in settings.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-django-storages-in-settingspy" title="Configure Django-Storages in settings.py" class="md-nav__link">
    Configure Django-Storages in settings.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#push-your-static-files-to-the-cloud" title="Push your static files to the cloud" class="md-nav__link">
    Push your static files to the cloud
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-with-the-admin" title="Test with the admin" class="md-nav__link">
    Test with the admin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-http-settings" title="Additional HTTP Settings" class="md-nav__link">
    Additional HTTP Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpful-links" title="Helpful Links" class="md-nav__link">
    Helpful Links
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="hosting-static-files">Hosting Static Files<a class="headerlink" href="#hosting-static-files" title="Permanent link">&para;</a></h1>
<p>Generally if you'd like to use your Django project to present a User Interface (UI) then you'll need to display Images and CSS and serve Javascript files.  These are known as <a href="https://docs.djangoproject.com/en/1.10/howto/static-files/deployment/">static files</a> and to deliver them using Zappa is unlike the traditional method of hosting the static files on a Linux or Windows box.  </p>
<h3 id="static-files-and-code-on-a-single-server">Static files and Code on a Single Server<a class="headerlink" href="#static-files-and-code-on-a-single-server" title="Permanent link">&para;</a></h3>
<p>A very common configuration you may see recommended is to have your Django project <a href="https://docs.djangoproject.com/en/1.10/howto/static-files/deployment/#serving-the-site-and-your-static-files-from-the-same-server">deployed on a server with your static files</a>.  Then the advice is to have your web server software (apache, nginx, or other) have special mechanisms to directly serve the static files.  The idea is to have the fast web server software handle delivering the static images to clients and the comparatively slow Django/python code process the more complex views and page content.  </p>
<p>Because Zappa runs in the serverless lambda environment, this approach is not feasible since you cannot configure the web server to handle various url paths differently.  Thus another approach must be taken.</p>
<h3 id="leveraging-wsgi-app-to-serve-files">Leveraging WSGI app to serve files<a class="headerlink" href="#leveraging-wsgi-app-to-serve-files" title="Permanent link">&para;</a></h3>
<p>The situation where one does not have access to the web server software configuration is more common than one may think.  Hosting in a shared environment, or on Platform as a Service (PaaS) like OpenShift may prevent full configuration of the web server to effectively serve static files.  </p>
<p>There are ways to leverage the WSGI application (Django for us) and instruct it to serve static files.  Normally, Django treats URL requests as an opportunity to run python code.  And the python code may have complex logic.  But there is a model called <a href="https://github.com/evansd/whitenoise">WhiteNoise</a>.  It is an app that will minimize the python code processing to more efficiently serve static files.  Thus no external web server software configuration is required.  While perhaps not as optimal as having the web server hosting the files, this method has been used in production effectively.  </p>
<h3 id="using-external-services-to-serve-files">Using external services to serve files<a class="headerlink" href="#using-external-services-to-serve-files" title="Permanent link">&para;</a></h3>
<p>Finally, there is an option to use an <a href="https://docs.djangoproject.com/en/1.10/howto/static-files/deployment/#serving-static-files-from-a-cloud-service-or-cdn">external service to serve static files</a>.  This is the option that is the subject of this walkthrough.</p>
<p>While any external service that serves files over HTTP could work, the focus for us will be to leverage the AWS service of S3 and the Content Delivery Network (CDN) of CloudFront to meet our needs.  </p>
<p>The S3 service will contain our files and provide the fundamental HTTP/HTTPS service.  This alone will suffice for many recreational projects, but more professional project will want to leverage CloudFront to provide caching, faster delivery, and better protection of assets.</p>
<p>Note that much of this information was pulled from <a href="https://www.caktusgroup.com/blog/2014/11/10/Using-Amazon-S3-to-store-your-Django-sites-static-and-media-files/">https://www.caktusgroup.com/blog/2014/11/10/Using-Amazon-S3-to-store-your-Django-sites-static-and-media-files/</a></p>
<h3 id="using-a-cdn-for-the-entire-project">Using a CDN for the entire project<a class="headerlink" href="#using-a-cdn-for-the-entire-project" title="Permanent link">&para;</a></h3>
<p>There are also advantages to serving the entire Django project (Lambda functions and S3 Static files) via the CloudFront CDN.  This option will not be covered in this Walkthrough.</p>
<h2 id="setup-and-prerequisites">Setup and Prerequisites<a class="headerlink" href="#setup-and-prerequisites" title="Permanent link">&para;</a></h2>
<p>Make sure you understand and execute the <a href="../walk_core/">Core Django Walkthrough</a> first.  This Walkthrough builds upon that.</p>
<h2 id="setup-amazon-account">Setup Amazon Account<a class="headerlink" href="#setup-amazon-account" title="Permanent link">&para;</a></h2>
<p>You will need an AWS S3 bucket to host your static files.  This should not be the same as your S3 bucket used by zappa to upload your code.  The reason is that you will be making some modifications to the S3 bucket to properly use HTTP to serve files.</p>
<p>Create an S3 bucket and name it something like <code>zappa-static</code>.  You may name it anything you like but for the purposes of this walkthrough we will use <code>zappa-static</code>.  Replace all occurrences of this string with your chosen bucket name.</p>
<h3 id="configure-cors">Configure CORS<a class="headerlink" href="#configure-cors" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html">CORS</a> is an HTTP standard that enables browsers to pull content from different sources on a single web page.  Because our Django Lambda views are hosted on a different URL, we must enable the CORS setting on the S3 bucket holding our static assets to allow the files to be pulled.  </p>
<p>Go to your S3 bucket properties, and under "Permissions", click on "Add CORS Configuration". Paste this in:</p>
<p><div class="codehilite"><pre><span></span> <span class="nt">&lt;CORSConfiguration&gt;</span>
        <span class="nt">&lt;CORSRule&gt;</span>
            <span class="nt">&lt;AllowedOrigin&gt;</span>*<span class="nt">&lt;/AllowedOrigin&gt;</span>
            <span class="nt">&lt;AllowedMethod&gt;</span>GET<span class="nt">&lt;/AllowedMethod&gt;</span>
            <span class="nt">&lt;MaxAgeSeconds&gt;</span>3000<span class="nt">&lt;/MaxAgeSeconds&gt;</span>
            <span class="nt">&lt;AllowedHeader&gt;</span>Authorization<span class="nt">&lt;/AllowedHeader&gt;</span>
        <span class="nt">&lt;/CORSRule&gt;</span>
    <span class="nt">&lt;/CORSConfiguration&gt;</span>
</pre></div>

<strong>Note that this CORS policy is very open and simple.  If you have a production site, you will probably want to narrow the scope of CORS or leverage a CDN.</strong></p>
<h2 id="configure-django-project">Configure Django Project<a class="headerlink" href="#configure-django-project" title="Permanent link">&para;</a></h2>
<h3 id="install-modules">Install modules<a class="headerlink" href="#install-modules" title="Permanent link">&para;</a></h3>
<p>In order to re-use existing modules freely available, we will use the django-storages module to handle the management of files to and from AWS S3.  So first you must install it.  <em>Don't forget to activate your virtual environment</em> </p>
<div class="codehilite"><pre><span></span>pip install django-storages boto
</pre></div>


<p>And thus you should take the corresponding package versions reported by <code>pip freeze</code> into the requirements.txt file.  At the time of this writing, the additional lines would be:</p>
<div class="codehilite"><pre><span></span>...
boto==2.45.0
django-storages==1.5.1
...
</pre></div>


<h3 id="add-django-storages-to-the-installed_apps-in-settingspy">Add Django-Storages to the INSTALLED_APPS in settings.py<a class="headerlink" href="#add-django-storages-to-the-installed_apps-in-settingspy" title="Permanent link">&para;</a></h3>
<p>Edit your settings.py file to include django-storages.  Note it's just called 'storages' as an app.</p>
<div class="codehilite"><pre><span></span>INSTALLED_APPS = (
          ...,
          &#39;storages&#39;,
     )
</pre></div>


<h3 id="configure-django-storages-in-settingspy">Configure Django-Storages in settings.py<a class="headerlink" href="#configure-django-storages-in-settingspy" title="Permanent link">&para;</a></h3>
<p>Add these lines anywhere in your settings.py.  These values instruct Django-Storages to properly configure a basic setup for leveraging S3.  More information about these values can be found here: <a href="http://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html">http://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html</a></p>
<div class="codehilite"><pre><span></span>AWS_STORAGE_BUCKET_NAME = &#39;zappa-static&#39;

AWS_S3_CUSTOM_DOMAIN = &#39;%s.s3.amazonaws.com&#39; % AWS_STORAGE_BUCKET_NAME

STATIC_URL = &quot;https://%s/&quot; % AWS_S3_CUSTOM_DOMAIN

STATICFILES_STORAGE = &#39;storages.backends.s3boto.S3BotoStorage&#39;
</pre></div>


<h2 id="push-your-static-files-to-the-cloud">Push your static files to the cloud<a class="headerlink" href="#push-your-static-files-to-the-cloud" title="Permanent link">&para;</a></h2>
<p>The funny thing about zappa is that generally you have a working local environment and a working lambda environment.  In theory either location can push the static files to the cloud.  </p>
<p>Using your local environment:</p>
<div class="codehilite"><pre><span></span>python manage.py collectstatic --noinput
</pre></div>


<p>Or to instruct your zappa-powered AWS lambda environment to do it for you:</p>
<div class="codehilite"><pre><span></span>zappa manage dev &quot;collectstatic --noinput&quot;
</pre></div>


<h3 id="test-with-the-admin">Test with the admin<a class="headerlink" href="#test-with-the-admin" title="Permanent link">&para;</a></h3>
<p>Once you have pushed your static files to S3, you can visit the admin site for your Django project to test if it worked.  Appending /admin/ to your zappa project you can now browse to the admin site and watch the css being loaded just fine.</p>
<p><img alt="success" src="../images/static_django.png" /></p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Well great, now you have a working Django site that processes views and can serve static files.  But you can't login because there is no database.  Continue through the walkthroughs to complete a fully functional website.</p>
<h2 id="additional-http-settings">Additional HTTP Settings<a class="headerlink" href="#additional-http-settings" title="Permanent link">&para;</a></h2>
<p>As mentioned above you probably want to ensure a valid CORS policy is in place for anything resembling production.</p>
<p>In addition there are many default HTTP headers that can be served with your static files to ensure proper caching and so forth.  The example format in your settings.py file is:</p>
<div class="codehilite"><pre><span></span>    AWS_HEADERS = {  
        &#39;Expires&#39;: &#39;Thu, 31 Dec 2099 20:00:00 GMT&#39;,
        &#39;Cache-Control&#39;: &#39;max-age=94608000&#39;,
    }
</pre></div>


<h2 id="helpful-links">Helpful Links<a class="headerlink" href="#helpful-links" title="Permanent link">&para;</a></h2>
<p>These two articles were extremely helpful when writing this page:</p>
<ul>
<li><a href="https://www.caktusgroup.com/blog/2014/11/10/Using-Amazon-S3-to-store-your-Django-sites-static-and-media-files/">https://www.caktusgroup.com/blog/2014/11/10/Using-Amazon-S3-to-store-your-Django-sites-static-and-media-files/</a></li>
<li><a href="http://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html">http://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html</a></li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../walk_core/" title="Core Django Setup" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Core Django Setup
              </span>
            </div>
          </a>
        
        
          <a href="../walk_database/" title="Using a Database" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Using a Database
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2017 <a href="https://github.com/edgarroman">Edgar Roman</a>
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/edgarroman" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-0b7df094bf.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-97437653-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>